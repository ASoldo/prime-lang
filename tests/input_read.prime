test tests.input_read;

import core.types;

fn reads_integer_input() -> bool {
  match in[int32]("Enter age: ") {
    Result::Ok(age) => age == 21,
    Result::Err(_) => false,
  }
}

fn reports_invalid_integer_input() -> bool {
  match in[int32]("Enter age: ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "invalid integer input",
  }
}

fn reads_bool_input() -> bool {
  match in[bool]("Are you ready? ") {
    Result::Ok(flag) => flag,
    Result::Err(_) => false,
  }
}

fn rejects_invalid_bool_input() -> bool {
  match in[bool]("Continue? ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "expected `true` or `false`",
  }
}

fn reads_float_input() -> bool {
  match in[float64]("Temp: ") {
    Result::Ok(value) => value == 98.6,
    Result::Err(_) => false,
  }
}

fn rejects_invalid_float_input() -> bool {
  match in[float64]("Temp: ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "invalid float input",
  }
}

fn reads_string_input() -> bool {
  match in[string](`Name: `) {
    Result::Ok(name) => name == "Prime",
    Result::Err(_) => false,
  }
}

fn reads_rune_choice() -> bool {
  match in[rune]("Choose [Y/N]: ") {
    Result::Ok(code) => code == 'Y',
    Result::Err(_) => false,
  }
}

fn rejects_out_of_range_int8() -> bool {
  match in[int8]("Small: ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "integer out of range for int8",
  }
}

fn reads_uint8() -> bool {
  match in[uint8]("u8: ") {
    Result::Ok(value) => value == 42,
    Result::Err(_) => false,
  }
}

fn rejects_invalid_uint8() -> bool {
  match in[uint8]("bad u8: ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "invalid integer input",
  }
}

fn reads_uint16() -> bool {
  match in[uint16]("u16: ") {
    Result::Ok(value) => value == 500,
    Result::Err(_) => false,
  }
}

fn reads_uint32() -> bool {
  match in[uint32]("u32: ") {
    Result::Ok(value) => value == 70000,
    Result::Err(_) => false,
  }
}

fn reads_uint64() -> bool {
  match in[uint64]("u64: ") {
    Result::Ok(value) => value == 1000000,
    Result::Err(_) => false,
  }
}

fn reads_usize() -> bool {
  match in[usize]("usize: ") {
    Result::Ok(value) => value == 128,
    Result::Err(_) => false,
  }
}

fn reads_float32_input() -> bool {
  match in[float32]("float32: ") {
    Result::Ok(value) => value == 3.14,
    Result::Err(_) => false,
  }
}

fn rejects_invalid_float32_input() -> bool {
  match in[float32]("bad float32: ") {
    Result::Ok(_) => false,
    Result::Err(msg) => msg == "invalid float input",
  }
}
